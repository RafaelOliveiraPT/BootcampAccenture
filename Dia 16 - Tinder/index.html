<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Bootstrap demo</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div
      class="container vh-100 d-flex justify-content-center align-items-center"
    >
      <div class="card text-center" style="max-width: 600px; width: 100%">
        <img
          id="cardImage"
          src="..."
          class="rounded mx-auto d-block mt-3"
          alt="..."
          style="max-width: 100%; height: auto"
        />

        <div class="card-body">
          <h5 id="cardTitle" class="card-title">Test</h5>
          <p id="cardDescription" class="card-text">
            This is a wider card with supporting text below as a natural lead-in
            to additional content.
          </p>
          <div class="buttons">
            <button class="btn dislike" onclick="nextBook(false)">
              &#10006;
            </button>
            <button class="btn like" onclick="nextBook(true)">&#10084;</button>
          </div>
          <p class="card-text">
            <small class="text-body-secondary">
              <a id="linkInfo" href="http://"> Info </a></small
            >
          </p>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
      crossorigin="anonymous"
    ></script>
    <script src="./dataModels.js"></script>

    <script>
      const arrayBooks = [];
      const elementCardImage = document.getElementById("cardImage");
      const elementCardTitle = document.getElementById("cardTitle");
      const elementCardDescription = document.getElementById("cardDescription");
      const elementLinkInfo = document.getElementById("linkInfo");

      async function getBooksFromGoogle(search) {
        const url = `https://www.googleapis.com/books/v1/volumes?q=${search}`;

        const response = await fetch(url);

        if (response.ok) {
          const dataFromGoogle = await response.json();
          console.log(dataFromGoogle);

          dataFromGoogle.items.forEach((bookData) => {
            const {
              id,
              volumeInfo: {
                title,
                authors,
                publisher,
                publishedDate,
                description,
                averageRating,
                imageLinks,
                infoLink,
              },
            } = bookData;

            const book = new Book(
              id,
              title,
              authors,
              publisher,
              publishedDate,
              description,
              averageRating,
              imageLinks,
              infoLink
            );

            arrayBooks.push(book);
          });

          elementCardTitle.textContent = arrayBooks[0].title;
          elementCardDescription.textContent = arrayBooks[0].description;
          if (arrayBooks[0].imageLinks) {
            elementCardImage.src = arrayBooks[0].imageLinks.thumbnail;
          } else {
            elementCardImage.src = "";
          }
          elementLinkInfo.href = arrayBooks[0].infoLink;
          console.log(arrayBooks);
        }
      }

      getBooksFromGoogle("harry");
    </script>
  </body>
</html>
