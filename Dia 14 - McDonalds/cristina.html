<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Desafio McD</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">

</head>

<body>

    <nav id="navbar-example2" class="navbar bg-body-tertiary px-3 mb-3">
        <a class="navbar-brand" href="#">Desafio McDonalds</a>
        <ul class="nav nav-pills">
            <li class="nav-item">
                <a class="nav-link" href="#scrollspyHeading1">Novo pedido</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#scrollspyHeading2">Remover pedido</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#scrollspyHeading3">Pedidos activos</a>
            </li>
        </ul>
    </nav>
    <div data-bs-spy="scroll" data-bs-target="#navbar-example2" data-bs-root-margin="0px 0px -40%"
        data-bs-smooth-scroll="true" class="scrollspy-example bg-body-tertiary p-3 rounded-2" tabindex="0">
        <h4 id="scrollspyHeading1">Novo pedido</h4>
        <p></p>

        <form>
            <div class="mb-3">
                <label for="exampleClientName" class="form-label">Nome do Cliente:</label>
                <input type="text" class="form-control" id="exampleInputClientName" placeholder="Nome do cliente">

            </div>

            <p>Artigo:</p>
            <select class="form-select" aria-label="Default select example" id="categorias">
                <option selected>Selecionar a categoria que pretende </option>
                <option value="acompanhamentos">Acompanhamentos</option>
                <option value="bebidas">Bebidas</option>
                <option value="sanduiches">Sanduiches</option>
            </select>

            <select class="form-select" aria-label="Default select example" id="opcoesporcategorias">
                <option selected>Selecionar o que pretende </option>

            </select>

            <div class="container mb-3">
                <br>
                <label type="text" for="extra" class="col-sm-2">Extra:</label>
                <input type="radio" class="form-check-input" name="extra" id="semmostarda" value="Sem mostarda">
                <label class="form-check-label" for="semmostarda">Sem mostarda</label>
                <input type="radio" class="form-check-input" name="extra" id="sempickles" value="Sem pickles">
                <label class="form-check-label" for="sempickles">Sem pickles</label>
                <input type="radio" class="form-check-input" name="extra" id="semcebola" value="Sem cebola">
                <label class="form-check-label" for="semcebola">Sem cebola</label>
            </div>
            <br>


            <button type="button" class="btn btn-primary" onclick="adicionarartigo()">Adicionar Artigo!</button>
            <br>
            <br>
            <p></p>
            <button type="submit" class="btn btn-primary">Enviar novo pedido</button>
        </form>




        <script>
            const utilizadores = [];


            class User {
                constructor(name) {
                    this.name = name;
                    this.artigos = [];
                }

                show() {
                    console.log(this)
                }
                adicionarArtigo(variavel) {
                    this.artigos.push(variavel)
                }
            }

            class Artigo {
                constructor(categoria, opcoes, extra) {
                    this.categoria = categoria;
                    this.opcoes = opcoes;
                    this.extra = extra;
                }
            }

            function adicionarartigo() {
                console.log("teste");

                //guarda o nome do utilizador na variavel
                const nomeUtilizadorHTML = document.getElementById("exampleInputClientName").value;

                //verifica em todas as posicoes do array utilizador se o utilizador existe no array
                let utilizorAtual = "";
                for (const utilizador of utilizadores) {
                    if (utilizador.name == nomeUtilizadorHTML) {
                        utilizadorAtual = utilizador;
                    }
                }
                //vai verificar se o utilzadorAtual está vazio, se estiver, quer dizer que no array de utilizadores ainda não existe o utilizador
                // e então tem que criar um novo e adicionar esse novo user ao array dos utilizadores
                if (utilizorAtual === "") {
                    utilizadorAtual = new User(nomeUtilizadorHTML);
                    utilizadores.push(utilizadorAtual);
                }

                //isto não precisas
                /* while (newUser === new User) {
                     Artigo.push(newArtigo);
                 }*/

                let newArtigo = new Artigo(
                    document.getElementById("categorias").value,
                    document.getElementById("opcoesporcategorias").value,
                    genderHelper(document.querySelectorAll("[name=extra]")),
                )
                console.log(newArtigo);

                utilizadorAtual.adicionarArtigo(newArtigo);


                utilizorAtual.show();

            }


            function genderHelper(radioInputs) {
                console.log(radioInputs);
                for (const input of radioInputs) {
                    if (input.checked) {
                        return input.value
                    }
                }
            }

            function clearAllFields() {
                document.getElementById("categorias").value = "";
                document.getElementById("opcoesporcategorias").value = "";
                document.getElementsByNam("extra") = "";
            }

        </script>

        <script>
            document.addEventListener('DOMContentLoaded', (event) => {
                const tableData = [];
                let table1 = new MyTable();
                table1.initTable('table1', Object.keys(newArrayData[0]));
                console.log(newArrayData);


                for (let index = 0; index < newArrayData.length; index++) {
                    const element = newArrayData[index];
                    console.log(Object.values(element));
                    console.dir(document.getElementById('table1_body'));
                    table1.addArrayToTableRow("table1_body", Object.values(element));
                }

            })

        </script>


        <script src="produtos.js"></script>


        <h4 id="scrollspyHeading2">Remover pedido</h4>

        <div id="table1" class="table table-dark table-striped-columns"></div>






        <p>...</p>
        <h4 id="scrollspyHeading3">Pedidos 2</h4>
        <p>...</p>

    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
        crossorigin="anonymous"></script>




</body>

</html>