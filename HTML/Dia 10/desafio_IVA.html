<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Desafio IVA</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous" />
</head>

<body>
  <!-- init html code -->

  <div class="container">

    <pre class="p-0 mb-0" id="exercise"></pre>
    <div class="col-7">

      <div
        class="border border-4 rounded border-warning d-flex justify-content-center align-items-center p-4 h-100 mb-0">

        <h5 class="mb-0"> Últimas vendas </h5>

      </div>

      <table id="lastSalesTable" class="table table-striped table-hover">
        <thead>
          <tr>
            <th scope=" col">Name</th>
            <th scope="col">Total Cost</th>

          </tr>
        </thead>
        <tbody>
          <tr>

          </tr>

        </tbody>
      </table>
    </div>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
    crossorigin="anonymous"></script>
  <script>
    const data = [
      {
        client: "Zé Carlos",
        products: [
          {
            product: "Atum",
            iva: 13,
            preco: 4,
          },
          {
            product: "Coca-Cola",
            iva: 23,
            preco: 2,
          },
          {
            product: "Agua",
            iva: 6,
            preco: 1,
          },
        ],
      },
      {
        client: "Zé Manel",
        products: [
          {
            product: "Bolachas",
            iva: 23,
            preco: 3,
          },
          {
            product: "Coca-Cola",
            iva: 23,
            preco: 2,
          },
        ],
      },
      {
        client: "Jack",
        products: [
          {
            product: "Bolachas proteicas dog",
            iva: 6,
            preco: 4,
          },
          {
            product: "Coca-Cola dog",
            iva: 6,
            preco: 7,
          },
        ],
      },
      {
        client: "Zé Gato",
        products: [
          {
            product: "whiskas Saketas",
            iva: 6,
            preco: 3,
          },
          {
            product: "Ração pure",
            iva: 6,
            preco: 7,
          },
        ],
      },
    ];

    const exercise = `/********************************************************************************\n*\n*       Desafio: Adicionar iva aos produtos e apresentar os totais por cliente.\n*\n********************************************************************************/`;

    const elementExercise = document.getElementById("exercise");
    elementExercise.innerHTML = exercise;
    const elementHtmlSalesTable = document.getElementById("lastSalesTable");
    const elementBodyContent = elementHtmlSalesTable.querySelector('tbody');
    //  Add Logic
    data.forEach((client) => {
      let total = 0;
      client.products.forEach((product) => {
        total += product.preco * ((product.iva / 100) + 1);;
      });
      console.log(client.client + " vai pagar: " + total);
      const newLine = elementBodyContent.insertRow();
      const cell1 = newLine.insertCell(0);
      const cell2 = newLine.insertCell(1);
      cell1.textContent = client.client;
      cell2.textContent = total + " €";
    });
  </script>
</body>

</html>